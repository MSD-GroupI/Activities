{% extends 'base.html' %}

{% block content %}


    <section class="home-section nopadd-bot color-dark text-center">

        <div class="container marginbot-50">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <div class="animatedParent">
                        <div class="section-heading text-center">
                            <h2 class="h-bold animated bounceInDown">{{ activity_form.title }}</h2>
                            <div class="divider-header"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row marginbot-80">
                <div class="col-md-8 col-md-offset-2">
                    <form class="input-form" action="" method="POST">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-12">
                                {% if activity_form.message %}
                                    <p class="error-list">{{ activity_form.message }}</p>
                                {% endif %}
                                {% for field in activity_form %}
                                    <div class="form-group typeahead">
                                        {{ field }}
                                        {% if field.errors %}
                                            <li class="error-list">
                                                {% for error in field.errors %}
                                                    <ul>{{ error }}</ul>
                                                {% endfor %}
                                            </li>
                                        {% endif %}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        <input type="submit" value="Create" class="btn btn-skin btn-lg btn-block"/>
                    </form>

                </div>
            </div>
        </div>

        <div class="container marginbot-50">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <div class="animatedParent">
                        <div class="section-heading text-center">
                            <h2 id="pidor" class="h-bold animated bounceInDown"></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>

{% endblock %}

{% block scripts %}
<script type="text/javascript">
    function recommendationsRequest(){

        var type = $('#create_form_activity_type').val();

        if(type == ''){
            setTimeout(recommendationsRequest, 5000);
            return;
        }

        $.ajax({
            url: "{% url 'activity:recommendations' %}" + '?' + 'type=' + type,
            type: "GET",
        })
        .done(recommendationsResponse)
        .always(function() {setTimeout(recommendationsRequest, 5000);});
        };
</script>>

<script type="text/javascript">
    function recommendationsResponse(response){
        document.getElementById("pidor").innerHTML = response;
    };
</script>>

<script type="text/javascript">
    (function(){

        recommendationsRequest();

    })();
</script>>

{% endblock %}
